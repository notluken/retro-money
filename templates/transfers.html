<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Retro Money">
    <meta name="theme-color" content="#000080">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icon-192.png') }}">
    <title>Excel 2.0 (1987) - Transferencias</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/excel-retro.css') }}">
    
    <!-- Mobile device detection -->
    <script type="text/javascript">
        var isMobileDevice = /iPhone|iPad|iPod|Android/.test(navigator.userAgent);
        
        if (isMobileDevice) {
            document.write('<link rel="stylesheet" href="{{ url_for("static", filename="css/mobile-fix.css") }}">');
            document.addEventListener('DOMContentLoaded', function() {
                document.body.classList.add('mobile-device');
            });
        }
    </script>
</head>
<body>
    <div class="excel-container">
        <div class="excel-header">
            <div class="excel-title">Microsoft Excel 2.0</div>
            <div class="excel-menubar">
                <a href="{{ url_for('index') }}" class="menu-item {% if active_page == 'expenses' %}active{% endif %}">Expense Tracker</a>
                <a href="{{ url_for('transfers') }}" class="menu-item {% if active_page == 'transfers' %}active{% endif %}">Transferencias</a>
                <a href="{{ url_for('todos') }}" class="menu-item {% if active_page == 'todos' %}active{% endif %}">Todo List</a>
                <a href="{{ url_for('investments') }}" class="menu-item {% if active_page == 'investments' %}active{% endif %}">Investments</a>
            </div>
        </div>
        
        <div class="spreadsheet-area">
            <div class="account-management-section">
                <div class="section-title">Gestión de Cuentas</div>
                <div class="account-cards" id="account-cards">
                    <!-- Las tarjetas de cuentas se generarán dinámicamente con JavaScript -->
                </div>
                <div class="account-actions">
                    <button id="update-accounts">Actualizar Saldos</button>
                </div>
            </div>
            
            <div class="transfer-management-section">
                <div class="section-title">Registrar Nueva Transferencia</div>
                <div class="transfer-form">
                    <div class="form-row">
                        <label for="transfer-date">Fecha:</label>
                        <input type="date" id="transfer-date">
                        
                        <label for="transfer-description">Descripción:</label>
                        <input type="text" id="transfer-description" placeholder="Pago de servicios...">
                    </div>
                    <div class="form-row">
                        <label for="transfer-from">Desde:</label>
                        <select id="transfer-from">
                            <!-- Las opciones se generarán dinámicamente -->
                        </select>
                        
                        <label for="transfer-to">Hacia:</label>
                        <select id="transfer-to">
                            <!-- Las opciones se generarán dinámicamente -->
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="transfer-amount">Monto Bruto:</label>
                        <input type="number" id="transfer-amount" min="0" step="0.01">
                        
                        <div class="fee-details">
                            <span>Comisión Payoneer (3%): <span id="fee-payoneer">0.00</span> USD</span>
                            <span>Comisión Belo (1%): <span id="fee-belo">0.00</span> USD</span>
                            <span>Total Comisiones: <span id="fee-amount">0.00</span> USD</span>
                            <span>Monto Neto: <span id="net-amount">0.00</span> USD</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="register-transfer">Registrar Transferencia</button>
                    </div>
                </div>
            </div>
            
            <div class="transfers-history-section">
                <div class="section-title">Historial de Transferencias</div>
                <div class="transfers-grid">
                    <div class="transfers-grid-header">
                        <div class="transfers-grid-cell">Fecha</div>
                        <div class="transfers-grid-cell">Descripción</div>
                        <div class="transfers-grid-cell">Desde</div>
                        <div class="transfers-grid-cell">Hacia</div>
                        <div class="transfers-grid-cell">Monto Bruto</div>
                        <div class="transfers-grid-cell">Comisiones</div>
                        <div class="transfers-grid-cell">Monto Neto</div>
                        <div class="transfers-grid-cell">Acciones</div>
                    </div>
                    <div class="transfers-grid-body" id="transfers-grid-body">
                        <!-- Las transferencias se generarán dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="excel-statusbar">
            <div class="status-cell">READY</div>
            <div class="status-help">Press F1 for Help</div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/app-storage.js') }}"></script>
    <script src="{{ url_for('static', filename='js/transfers.js') }}"></script>
</body>
</html> 